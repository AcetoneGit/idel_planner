<div class="container mt-3">
  <div class="card shadow-sm border-0 report-card">
    <div class="card-header text-center py-3">
      <h5 class="mb-0 text-dark fw-bold">Relève du <%= @report.start_date.strftime("%d/%m/%Y") %> au <%= @report.end_date.strftime("%d/%m/%Y") %></h5>
    </div>

    <div class="card-body">
      <%= turbo_frame_tag dom_id(@report, :text) do %>
        <% if params[:editing] == "true" %>
          <%= form_with(model: @report, url: report_path(@report), method: :patch, local: false) do |f| %>
            <div class="mb-3">
              <%= f.label :text, "Contenu du rapport", class: "form-label fw-bold text-muted" %>
              <%= f.text_area :text, class: "form-control text-area", rows: 8 %>
            </div>
            <div class="d-flex justify-content-center gap-2">
              <%= f.submit "Enregistrer", class: "btn btn-outline-dark w-50" %>
              <%= link_to "Annuler", report_path(@report), class: "btn btn-light w-50", data: { turbo_frame: "_top" } %>
            </div>
          <% end %>
        <% else %>
          <pre class="report-text"><%= @report.text&.html_safe %></pre>
          <div class="text-center mt-3">
            <%= link_to "Modifier", report_path(@report, editing: true), class: "btn btn-outline-dark w-100", data: { turbo_frame: "_top" } %>
          </div>
        <% end %>
      <% end %>
      <div class="text-center mt-3">
      <%= link_to 'Supprimer', report_path(@report),
                  data: { turbo_method: :delete, turbo_confirm: 'Êtes-vous sûr de vouloir supprimer ce rapport ?' },
                  class: "btn btn-outline-danger w-100" %>
    </div>
    </div>
  </div>
</div>
